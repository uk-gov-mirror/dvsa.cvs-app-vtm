<ng-container *ngIf="amendedTechRecord() as vm">
  <table class="govuk-table">
    <caption class="govuk-table__caption govuk-table__caption--m">
      Axles
    </caption>

    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-table__header"></th>

        <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.PSV; else hgvAndTrlTh">
          <th scope="col" class="govuk-table__header">Kerb</th>
          <th scope="col" class="govuk-table__header">Laden</th>
          <th scope="col" class="govuk-table__header">GB max</th>
          <th scope="col" class="govuk-table__header">Design</th>
        </ng-container>

        <ng-template #hgvAndTrlTh>
          <th scope="col" class="govuk-table__header">GB</th>
          <th scope="col" class="govuk-table__header">EEC</th>
          <th scope="col" class="govuk-table__header">Design</th>
        </ng-template>
      </tr>
    </thead>

    <tbody class="govuk-table__body">
      <!-- Normal Axles -->
      <ng-container *ngFor="let axle of vm.techRecord_axles">
        <tr class="govuk-table__row" *ngIf="hasAxleChanged(axle)">
          <th scope="col" class="govuk-table__header">Axle {{ axle.axleNumber }}</th>

          <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.HGV || vm.techRecord_vehicleType === VehicleTypes.TRL">
            <td class="govuk-table__cell">{{ axle.weights_gbWeight }}</td>
            <td class="govuk-table__cell">{{ $any(axle).weights_eecWeight }}</td>
            <td class="govuk-table__cell">{{ axle.weights_designWeight }}</td>
          </ng-container>

          <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.PSV">
            <td class="govuk-table__cell">{{ $any(axle).weights_kerbWeight }}</td>
            <td class="govuk-table__cell">{{ $any(axle).weights_ladenWeight }}</td>
            <td class="govuk-table__cell">{{ axle.weights_gbWeight }}</td>
            <td class="govuk-table__cell">{{ axle.weights_designWeight }}</td>
          </ng-container>
        </tr>
      </ng-container>

      <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.HGV || vm.techRecord_vehicleType === VehicleTypes.TRL">
        <tr class="govuk-table__row" *ngIf="hasHGVOrTRLGrossAxleChanged()">
          <th scope="col" class="govuk-table__header">Gross</th>
          <td class="govuk-table__cell">{{ vm.techRecord_grossGbWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_grossEecWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_grossDesignWeight }}</td>
        </tr>
      </ng-container>

      <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.PSV">
        <tr class="govuk-table__row" *ngIf="hasPsvGrossAxleChanged()">
          <th scope="col" class="govuk-table__header">Gross</th>
          <td class="govuk-table__cell">{{ vm.techRecord_grossKerbWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_grossLadenWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_grossGbWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_grossDesignWeight }}</td>
        </tr>
      </ng-container>

      <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.HGV">
        <tr class="govuk-table__row" *ngIf="hasHgvTrainAxleChanged()">
          <th scope="col" class="govuk-table__header">Train</th>
          <td class="govuk-table__cell">{{ vm.techRecord_trainGbWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_trainEecWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_trainDesignWeight }}</td>
        </tr>
      </ng-container>

      <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.PSV">
        <tr class="govuk-table__row" *ngIf="hasPsvTrainAxleChanged()">
          <th scope="col" class="govuk-table__header">Train</th>
          <td class="govuk-table__cell"></td>
          <td class="govuk-table__cell"></td>
          <td class="govuk-table__cell">{{ vm.techRecord_maxTrainGbWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_trainDesignWeight }}</td>
        </tr>
      </ng-container>

      <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.HGV">
        <tr class="govuk-table__row" *ngIf="hasMaxTrainAxleChanged()">
          <th scope="col" class="govuk-table__header">Max Train</th>
          <td class="govuk-table__cell">{{ vm.techRecord_maxTrainGbWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_maxTrainEecWeight }}</td>
          <td class="govuk-table__cell">{{ vm.techRecord_maxTrainDesignWeight }}</td>
        </tr>
      </ng-container>
    </tbody>
  </table>

  <ng-container *ngIf="vm.techRecord_vehicleType === VehicleTypes.PSV">
    <dl class="govuk-summary-list" *ngIf="hasChanged('techRecord_unladenWeight')">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Unladen Weight
        </dt>
        <dd class="govuk-summary-list__value">
          {{ vm.techRecord_unladenWeight }} kg
        </dd>
      </div>
    </dl>
  </ng-container>
</ng-container>
