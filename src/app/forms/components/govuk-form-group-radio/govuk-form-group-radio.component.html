<div class="govuk-form-group" [id]="id">
  <fieldset class="govuk-fieldset" role="group">
    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
      <h1 class="govuk-fieldset__heading tags">
        {{ controlLabel() }}
        @if (tags().length) {
          <div>
            @for (tag of tags(); track tag) {
              <app-tag [type]="tag.colour">{{ tag.label }}</app-tag>
            }
          </div>
        }
      </h1>
    </legend>

    @if (controlHint()) {
      <div class="govuk-hint" [id]="hintId">{{ controlHint() }}</div>
    }

    @if (hasError) {
      @let firstError = (control?.errors | keyvalue)?.[0]?.value;
      <p class="govuk-error-message" [id]="errorId">
        <span class="govuk-visually-hidden">Error: </span>
        <span>{{
          typeof firstError === 'string' ? firstError : firstError.error
        }}</span>
      </p>
    }

    @if (warning()) {
      <p class="govuk-error-message" id="{{ id }}-error">
        <span class="govuk-visually-hidden">Error: </span>
        <span>{{ warning() }}</span>
      </p>
    }

    <div
      class="govuk-radios"
      [class.govuk-radios--small]="size() === 'small'"
      [class.govuk-radios--inline]="orientation() === 'horizontal'"
      data-module="govuk-radios"
    >
      <ng-content>
        @for (option of options(); track option) {
          <div class="govuk-radios__item">
            <input
              id="{{ id }}-{{ option.value }}-radio"
              class="govuk-radios__input"
              type="radio"
              name="{{ id }}"
              [value]="option.value"
              [checked]="option.value === value()"
              [attr.aria-describedby]="hintId"
              [attr.aria-labelledby]="id + '-' + option.value + '-label'"
              [attr.data-testid]="id"
              [class.govuk-radios__input--error]="hasError"
              [(ngModel)]="value"
              (ngModelChange)="onChange($event)"
              [disabled]="disabled()"
              (blur)="onTouched()"
            />
            <label
              class="govuk-radios__label govuk-label"
              id="{{ id }}-{{ option.value }}-label"
              for="{{ id }}-{{ option.value }}-radio"
            >
              {{ option.label }}
            </label>

            @if (option.hint) {
              <div class="govuk--radios__hint govuk-hint govuk-!-padding-left-3">
                {{ option.hint }}
              </div>
            }
          </div>
        }
      </ng-content>
    </div>
  </fieldset>
</div>
